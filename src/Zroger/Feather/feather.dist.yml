parameters:
  feather.apache.class: "Zroger\\Feather\\Apache"
  feather.log_reader.class: "Zroger\\Feather\\LogReader"

services:
  apache:
    class: "%feather.apache.class%"
    arguments: ["%feather.server_root%", "%feather.document_root%"]
    calls:
      - [setConfigFile, ["%feather.config_file%"]]
      - [setPort, ["%feather.port%"]]
      - [setLogLevel, ["%feather.log_level%"]]
      - [setModules, ["%feather.modules%"]]
      - [setErrorLog, ["%feather.error_log%"]]
      - [setAccessLog, ["%feather.access_log%"]]
  error_log_reader:
    class: "Zroger\\Feather\\Log\\FileReader"
    arguments: ["%feather.error_log%"]
  access_log_reader:
    class: "Zroger\\Feather\\Log\\FileReader"
    arguments: ["%feather.access_log%"]
  log_watcher:
    class: "Zroger\\Feather\\Log\Watcher"
    calls:
      - [addReader, ["error_log", "@error_log_reader"]]
      - [addReader, ["access_log", "@access_log_reader"]]
