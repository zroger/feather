# ServerRoot /usr
ServerRoot {{ cache_dir }}

{% for module, path in modules if path %}
LoadModule {{ module }} {{ path }}
{% else %}
# no modules found.
{% endfor %}

<IfModule php5_module>
  AddType application/x-httpd-php .php
  AddType application/x-httpd-php-source .phps
  <IfModule dir_module>
    DirectoryIndex index.html index.php
  </IfModule>
</IfModule>

# PidFile {{ cache_dir }}/httpd.pid
# LockFile {{ cache_dir }}/accept.lock
PidFile httpd.pid
LockFile accept.lock

ServerName localhost
Listen {{ port }}

LogLevel debug

# Using tee since the error log is a fifo, which causes httpd to hang.
ErrorLog "|/usr/bin/tee -a {{ error_log }}"

# Use error_log for access logs as well so they show up in the console.
CustomLog "|/usr/bin/tee -a {{ error_log }}" "\"%r\" %>s %b"

DocumentRoot "{{ root }}"
<Directory "{{ root }}">
  AllowOverride all
  Order allow,deny
  Allow from all
</Directory>
